<script src="http://s206.ucoz.net/cgi/uutils.fcg?a=get_preroll_cookie&r=0.932347837945692"></script><script type="text/javascript" src="/abnl/?adsdata=c9BXKMkYTgNK9ueZLXEmLBhd13g1MuFqWDeJg8q0nrMi0ObJAGVKbbAWjTFGr2T3jOCUSZn6rw;7cOj0BYZvRFBS4dvs6lGipIl9UYUSkKiCHi2PwG;UFmafGVa3HDPAOFLmi5N0MyLZ9DP9u3n7FFOPbFcAwL48!sQXim4t^Bttt2xPLAq!BaPxVwPBWgrmesZRJ^mCa0KS8^nRP9Eo"></script><html>
<head>

<meta name=Keywords lang="ru" content="дифференциальный сигнал, дифференциальная пара">
<title>Routing Differential Pairs</title>
<link rel="stylesheet" type="text/css" href="../../styles.css">
</head>
<body bgcolor="#CCCCCC">
<script language="javascript" src="http://www.silar.ru/link.js" type="text/javascript"></script>
<a href="http://www.elart.narod.ru"><font face="Times New Roman, Times, serif"><strong><em>НА ГЛАВНУЮ СТРАНИЦУ</em></strong></font></a>
<a href="http://www.silar.ru/" target="_blank"><img border="0" width="1" height="1" alt="ПЗС камеры, тепловизионные камеры, тепловизоры Силар" src="http://www.silar.ru/img/1.gif" title="ПЗС камеры, тепловизионные камеры, тепловизоры Силар"></a>
<p class="header">РАЗВОДКА ДИФФЕРЕНЦИАЛЬНЫХ ПАР</p>
<p align="justify" style="margin-left:70pt; margin-right:70pt;"><b><font face="Times New Roman, Times, serif"><em>Дифференциальные 
пары работают только тогда превосходно, если они не взаимодействуют с другими сигналами. Однако компромиссные решения 
при трассировке позволяют применять плотную разводку трасс.</em></font></b></p>
<p class="left">Традиционные понятия о параллельных интерфейсных потоках начинают не выполняться при скорости выше 200 МГц 
из-за взаимодействия сигналов большого количества шин, требующегося для передачи огромного объема информации. Решением 
этой проблемы является применение последовательных интерфейсов, использующих передачу сигналов в дифференциальном виде и 
обеспечивающих необходимую скорость потока. Дифференциальная передача сигналов, кроме того, обеспечивает значительно более 
низкий уровень излучения, сокращает количество выводов устройств и сигнальных шин и предоставляет возможность передавать 
сигналы на относительно большие расстояния.</p>
<p class="left">Что это означает для разработчика печатных плат? Очевидно, новый набор требований к дизайну. Эти требования 
сосредоточиваются вокруг разводки двух проводников рядом друг с другом, но это не так просто, как может показаться вначале. 
Имеется масса теоретических материалов, но реальность может преподносить сюрпризы, по крайней мере в том, что касается 
требований, выдвигаемых к печатной плате.</p>
<p class="left">Дифференциальная передача сигналов подразумевает передачу одинаковой информации по двум проводникам. 
При этом используются две шины, как минимум один передатчик (драйвер) с выходами позитивного и негативного сигналов и по 
одному приемнику (ресиверу) на каждый сигнал. Драйвер передает сигналы инверсно друг другу. В то время как позитивный выходной 
сигнал, совпадающий по фазе с входным сигналом драйвера, переходит из низкого уровня в высокий, негативный выходной сигнал, 
инверсный входному, переходит из высокого уровня в низкий. На рисунке 1 показаны два выходных сигнала драйвера и дифференциальный 
сигнал, вычисляемый как разность между позитивным и негативным сигналами. Вычитание сигналов друг из друга происходит в 
дифференциальном ресивере.</p>
<p align="center"><img src="img1.gif" width="398" height="306" hspace="2" vspace="2" border="0" align="middle"></p>
<table border=0 width=100%>
  <tr> 
    <td colspan="2"><hr align="center" size="4" width="75%"></td>
  </tr>
  <tr> 
    <td colspan=2 align=center> <p class="part">ТЕОРИЯ</p></td>
  </tr>
  <tr> 
    <td width=50% valign="top">
		<p  class="left">Нет недостатка мнений экспертов по терминологии, как 
		необходимо говорить: "синфазный сигнал" (<em>common mode</em>), "сигнал 
		при дифференциальном включении" (<em>differential mode</em>) и даже "сигнал 
		нечетной волны" (<em>odd-mode</em>). Говоря по-простому, огромный теоретический 
		выигрыш дифференциальной пары происходит при использовании равных противофазных 
		сигналов, передаваемых по двум проводникам. Это предполагает, что проводники 
		располагаются настолько близко друг к другу, что электрическая энергия, 
		излучаемая каждым проводником, может быть воспринята другим (т.е. существуют 
		взаимосвязь и взаимовлияние). Основные преимущества от применения равных 
		противофазных сигналов, передающихся по близко расположенным проводникам, 
		следующие:</p>
	  <p  class="left"><font color="#FF0000"><strong>1. Защищенность от шума.</strong></font> 
		Любой шум, наводящийся на один из проводников, будет в такой же мере наводиться 
		и на другой проводник. Поскольку одинаковый шум в этом случае будет присутствовать 
		в обоих сигналах, то этот шум устраняется в разностном (дифференциальном) 
		сигнале.</p>
	</td>
    <td width=50% valign=top>
		<p  class="right"><font color="#FF0000"><strong>2. Нечувствительность 
		к опорному напряжению.</strong></font> В дифференциальном сигнале всегда 
		присутствует некоторый опорный уровень, позволяющий использовать его в 
		случае, когда передатчик и приемник имеют различные общие напряжения питания 
		(различные земли). Это также позволяет решить проблемы, связанные с нестабильностью 
		напряжений общих выводов, и улучшить целостность сигналов.</p>
		
	  <p  class="right"><font color="#FF0000"><strong>3. Уменьшение излучаемых 
		электромагнитных помех.</strong></font> Такие помехи возникают, в основном, 
		во время переключения сигнала из одного состояния в другое. Поскольку 
		оба дифференциальных сигнала переключаются одновременно, но противофазно, 
		то возникающие излучения взаимно компенсируются. Кроме того, каждый из 
		дифференциальных сигналов обычно имеет небольшую амплитуду (на рисунке 
		1 амплитуда составляет 0,4 В), поэтому уровень излучения также небольшой.</p>
		<p  class="right">И последнее в теории - дифференциальный импеданс. Он 
		определяется индивидуальным импедансом проводников пары и связью между ними.</p>
	</td>
  </tr>
  <tr> 
    <td colspan=2 align=center><hr align="center" size="4" width="75%"></td>
  </tr>
  <tr> 
    <td colspan=2 align=center> <p  class="part">РЕАЛЬНОСТЬ</p></td>
  </tr>
  <tr> 
    <td width=50% valign=top>
		<p  class="left">Ниже приводится пример создания дифференциальной пары, базирующийся на требованиях некоторых текущих стандартов.</p>
	    <ul style="margin-top: 0; margin-bottom: 0">
        <li> 
          <p  class="bullet-text"><i><b><font color=#0000FF>Z<sub>OD</sub> = 100 Ом &plusmn;10%. </font></b></i>
		  Дифференциальный импеданс, являющийся одним из основных факторов. Индивидуальный импеданс 
		  каждого проводника также может быть специфицирован и обычно близок к 50 Ом. Расстояние между 
		  проводниками и/или ширина проводников тоже могут быть определены, но если не оговорен стек 
		  дифференциальных пар, то всегда по умолчанию используется значение дифференциального импеданса.</p>
        </li>
        <li> 
          <p  class="bullet-text"><i><b><font color=#0000FF>Проводники пары должны быть подобраны по длине с 
		  точностью 0,635 мм (0,025 дюйма). </font></b></i>Более точное значение не играет особой роли, но 
		  может быть уменьшено при передаче сигналов с большой скоростью. Таким образом, проводники 
		  каждой пары должны быть согласованы по длине.</p>
        </li>
		</ul>
	</td>
    <td width=50% valign=top>
	    <ul style="margin-top: 0; margin-bottom: 0">
        <li> 
          <p  class="bullet-text"><i><b><font color=#0000FF>Расстояние между разными сигналами должно быть 
		  не менее 0,508 мм (0,020 дюйма). </font></b></i>Это расстояние между одним из проводников дифференциальной пары 
		  и проводником, по которому передается другой сигнал. Необходимо увеличивать расстояние между 
		  двумя дифференциальными парами настолько, насколько возможно.</p>
        </li>
        <li> 
          <p  class="bullet-text"><i><b><font color=#0000FF>Проводники тактового сигнала и группового сигнала данных должны 
		  быть подобраны по длине с точностью 6,35 мм (0,250 дюйма). </font></b></i>Более точное значение также не играет особой роли и 
		  зависит от скорости передачи. В зависимости от приложения, длина одних дифференциальных пар группового сигнала 
		  может отличаться от длины других пар этой же группы. (Под групповым сигналом здесь понимается несколько 
		  дифференциальных пар, объединенные одним тактовым сигналом и передающие схожую информацию.)</p>
        </li>
          <li> 
          <p  class="bullet-text"><i><b><font color=#0000FF>Поддержание постоянного опорного напряжения. </font></b></i>Иногда 
		  это означает удержание группового сигнала на одном слое с одним опорным напряжением. Дополнительные требования 
		  могут также предполагать ограничения в переходах на другие слои.</p>
        </li>
		</ul>
	</td>
  </tr>
  <tr> 
    <td colspan=2 align=center><hr align="center" size="2" width="75%"></td>
  </tr>
  <tr> 
    <td width=50% valign=top>
	<p  class="left">Таким образом, необходимо располагать проводники дифференциальной пары 
	настолько близко друг к другу, насколько это возможно, и поддерживать постоянным дифференциальный 
	импеданс. Все это выглядит логично и нет смысла в более подробных описаниях, правилах и 
	математических выкладках, чтобы возвращаться к этому. И, естественно, чтобы сигналы были на самом 
	деле дифференциальными (т.е. равными и противофазными). Теория обычно рассматривает 
	дифференциальные проводники в виде витых пар с сильной взаимосвязью, тогда как при типичном 
	значении дифференциального импеданса 100 Ом для печатных плат взаимосвязь мала. В этом основное 
	отличие.</p>
    <p  class="left">На рисунке 2 показано типичное сечение дифференциальной пары с импедансом 100 Ом.</p>
	<p align="center"><img src="img2.gif" width="229" height="203" hspace="2" vspace="2" border="0" align="middle"></p>
	</td>
    <td width=50% valign=top>
	<p  class="right">Предполагая возможные вопросы, попробуем пересмотреть теоретические 
	выгоды от применения дифференциальных сигналов. С точки зрения защищенности от внешнего 
	шума, важна не связь между шинами, а взаимное расположение шин, т.е. расстояние между 
	ними. Чем меньше это расстояние, тем становится более одинаковым воздествие сигнала-агрессора 
	на обе шины. Реальное уменьшение перекрестных помех возможно лишь при удалении источника 
	шума. Оказываемое воздействие зависит от квадрата расстояния между проводником агрессора 
	и сигнальным проводником. Выигрыш от нечувствительности к опорному напряжению в большей 
	степени зависит от качественных показателей интегральных схем и не зависит от связи между 
	дифференциальными шинами.</p>
	<p  class="right">И последний пункт, который может вызвать замешательство. Дифференциальные 
	сигналы могут использоваться в ситуации, когда передатчик и приемник используют совершенно 
	различные общие напряжения питания. Однако рекомендуется поддержание постоянного опорного 
	напряжения. В этом случае возникает противоречие между теорией и реальностью, но иногда то, 
	что получается, немного не вписывается в теорию.</p>
</td>
  </tr>
  <tr> 
    <td colspan=2 align=center><hr align="center" size="2" width="75%"></td>
  </tr>
  <tr> 
    <td width=50% valign=top>
	<p  class="left">Возвратимся к теории снова. Дифференциальная передача подразумевает использование 
	двух равных противофазных сигналов по двум проводникам. Эти комплементарные сигналы формируются 
	драйвером. Что же надо делать, чтобы эти сигнала оставались одинаковыми? Их симметрия есть ключ 
	ко всему. Теория ничего не говорит о скорости сигналов и, в особенности, о о скорости нарастания их 
	фронтов. Если бы эти сигналы были однопроводными, то тогда их импеданс и нагрузка для согласования 
	были бы главными критериями.</p>
	<p  class="left">И опять обратимся к теории, но с другой стороны. Если симметрия дифференциальных 
	трасс настолько важна, то становится чрезвычайно важным одинаковая длина проводников. Это более 
	важно, чем просто статическая проверка; сигналы должны сохранять фазовое соотношение (180&deg;) 
	на протяжении всей длины. Максимально возможная разводка проводников пары на одном слое и 
	минимальное количество переходов на другие слои также способствуют увеличению симметрии. 
	Расстояние от пары до других сигналов влияет на возможный наведенный шум, но взаимосвязь также 
	играет существенную роль для уменьшения восприимчивости к наводкам.</p>
	</td>
    <td width=50% valign=top>
	<p  class="right">Оставшееся касается того, что обычно дифференциальные сигналы передаются 
	на достаточно высокой скорости. Дифференциальный импеданс определяет оконечную нагрузку 
	линии передачи. Это же является справедливым и для базового опорного уровня. Все, рассмотренное 
	выше, а также качество взаимосвязи гарантирует, что электромагнитные помехи будут минимальными.</p>
	<p  class="right">Как все сказанное ранее перевести в разводку проводников? Общее количество 
	трасс равно удвоенному числу сигналов, но часто общий интерфейс имеет уменьшенное количество 
	сигналов. Это может дать небольшое послабление при разводке сложной печатной платы. К тому же, 
	сигналы пары следует рассматривать, как одно целое. Дифференциальный импеданс обусловливает 
	ширину проводников и расстояние между ними, но стратегия разводки должна полностью базироваться 
	на симметрии проводников пары на всей длине от драйвера до ресивера.</p>
	</td>
  </tr>
  <tr> 
    <td colspan=2><hr align="center" size="2" width="75%"></td>
  </tr>
  <tr> 
    <td width=50% valign=top>
	<p  class="left">Правила разводки должны применяться не только к базовым понятиям 
		(ширина проводников и расстояние между ними и между парой и другим сигналом), 
		но и к комплексным вопросам. На рисунке 3 показаны две дифференциальные 
		пары. После проверки DRC (<em>design rules check</em>) слева отмечены 
		несвязанные проводники, а справа сигналы двух связанных трасс не согласованы 
		по фазе.</p>
	  <p align="center"><img src="img3.gif" width="218" height="272" hspace="2" vspace="2" border="0" align="middle"></p>
	<p  class="left">Если имеется возможность, то в процессе разводки должны тестироваться 
	длины отрезков проводников пары между контрольными точками, чтобы сигналы, передающиеся 
	по ним, имели одинаковую фазовую задержку. Если такой возможности нет, необходимо 
	производить общую проверку длин проводников от начала до конца. Комплементарные сигналы 
	(рис. 1) должны приходить к приемнику в одно и то же время. Если же какой-либо сигнал 
	(позитивный или негативный) имеет задержку или опережение относительно другого сигнала, то 
	это говорит о том, что дифференциальная пара не оптимизирована и на нее может оказываться 
	сильное воздействие извне (амплитудное или временное).</p>
	</td>
    <td width=50% valign=top>
	<p  class="right">На рисунке 4 показана плохая разводка дифференциальных сигналов. Использование 
	углов в 45&deg;  более предпочтительно, чем углов в 90&deg;, при которых создается большая разница 
	в длине дифференциальных трасс и происходит некоторая потеря взаимосвязи между ними. Другая 
	ошибка в этом примере состоит в переходе одной из трасс на другой слой, что приводит к еще большей 
	потери взаимосвязи. Неидеальность вполне допустима, но количество элементов, приводящих к ней, 
	должно быть сокращено до минимума.</p>
	  <p align="center"><img src="img4.gif" width="296" height="274" hspace="2" vspace="2" border="0" align="middle"></p>
	<p  class="right">Когда требуется развести сложную печатную плату с большим количеством различных групп 
	дифференциальных пар, то может оказаться лучше в первую очередь разводить и оптимизировать пары, к 
	которым предъявляются одинаковые требования (правила). Допуск по длине пар внутри одной группы может 
	превышать допуск по длине проводников отдельно взятой пары пары. Таким образом, приоритет разводки 
	пары выше приоритета разводки группы. Идеально, если применяется интерактивная разводка, 
	предоставляющая обратную связь в динамике и помогающая процессу разводки.</p>
	</td>
  </tr>
  <tr> 
    <td colspan="2"><hr align="center" size="4" width="75%"></td>
  </tr>
</table>
<p  class="footer">
Перевод статьи<br>
Dennis Nagle<br>
ROUTING DIFFERENTIAL PAIRS<br>
Printed Circuit Design &amp; Manufacture<br>
August 2003<br>
<a href="http://www.silar.ru/" style="color:#cbcbcb"> </a></p>
	<table border=0 width="75%" align="center">
		<tr><td colspan="2"><hr align="center" size="4" width="100%"></td></tr>
		<tr><td colspan=2 align=center class="part">Примечание автора перевода</td></tr>
		<tr>
			<td width=50% valign="top" class="left">
				Рекомендации по разводке дифференциальных пар, приведенные в статье Д. Нэгла &quot;Разводка дифференциальных пар&quot;, 
				успешно применяются при проектировании печатных плат для прецизионных ПЗС камер в <a href="http://www.silar.ru" target="_blank">ЗАО &quot;НПП Силар&quot;</a>.
			</td>
		</tr>
	</table>
<!--begin of Top100-->
<a href="http://top100.rambler.ru/cgi-bin/stats_top100.cgi?512646"><img src="http://counter.rambler.ru/top100.cnt?512646" width=1 height=1 hspace="4" border=0 align="left"></a> 
<!--end of Top100-->
<!--begin of Top100 logo-->
<div align="left"><a href="http://top100.rambler.ru/top100/" target="_blank"><img src="http://top100-images.rambler.ru/top100/banner-88x31-rambler-black2.gif" width=88 height=31 border=0 align="middle"></a></div>
<!--end of Top100 logo -->

<!-- copyright (i3) --><div align="center"><a href="http://www.ucoz.ru/" title="Создать сайт бесплатно"><img style="margin:0;padding:0;border:0;" alt="Hosted by uCoz" src="http://s206.ucoz.net/img/cp/7.gif" width="80" height="15" title="Hosted by uCoz" /></a><br /></div><!-- /copyright -->
</body>
</html>
